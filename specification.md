# Project Specification: Qzvert AI
# Concept: "The Content-to-Quest Engine"
# Tech Stack: @tanstack/start@latest + Supabase

## 1. Vision & Brand Identity
- **Name:** Qzvert (Quiz + Convert)
- **Tagline:** "Content into Quests. Instantly."
- **Core Value:** Transforming static learning materials (PDF, Video, Text) into dynamic, gamified adventures (Quests).
- **Icon Style:** Modern Hexagon/Compass with a lightning bolt (Z-shape) representing speed and transformation.
- **Visual Theme:** Cyber-Grid / Space Adventure (Dark Mode by default).

## 2. Platform Architecture (Modern Full-stack)
- **Framework:** TanStack Start (SSR, Server Functions, Type-safe Routing).
- **AI Engine:** Google Gemini 3 Flash (Optimized for speed and JSON output).
- **Database & Auth:** Supabase (PostgreSQL with pgvector for Semantic Search).
- **UI Components:** Tailwind CSS + Shadcn UI + Framer Motion (for game-like transitions).

## 3. Core Features & User Journey
### A. The Qzvert Engine (Conversion)
- User pastes a YouTube URL, uploads a PDF, or pastes long text.
- Gemini API analyzes the content and structured it into a **Quest**.
- Output Format:
    - 1 Quest (Topic Level)
    - 3-5 Stages (Chapter Level)
    - 3-5 Quizzes per Stage (Challenge Level)

### B. The Learning Map (Gamification)
- Visual roadmap showing the stages of the Quest.
- Fog of War: Stages are locked until the previous one is completed (CD7: Curiosity).
- Life System: 3 Hearts per stage. Incorrect answers lose a heart (CD8: Loss Avoidance).

### C. Semantic Explore (Discovery)
- Search bar to find existing Quests.
- System uses **Vector Embeddings** to find similar topics already generated by other users to save API costs.

## 4. Database Schema (Supabase Migration)
- `quests`: id, user_id, title, raw_content, source_type, created_at.
- `stages`: id, quest_id, title, lesson_summary, order_index.
- `quizzes`: id, stage_id, question, options (JSONB), correct_answer, pun_feedback.
- `quest_embeddings`: id, quest_id, embedding (vector(1536)).

## 5. Development Roadmap for Claude Code
### Phase 1: Foundation
- Initialize TanStack Start project.
- Setup Supabase Local with CLI and Docker.
- Create initial migrations based on the schema above.

### Phase 2: AI Logic
- Implement `app/utils/gemini.server.ts` to handle content analysis.
- Define a strict JSON schema for the AI to follow (The "Qzvert Format").

### Phase 3: Gamified UI
- Build the "Learning Map" component.
- Build the "Quiz Player" with animations for correct/incorrect answers.
- Implement the "Heart" and "XP" logic.

### Phase 4: Exploration & Optimization
- Implement Semantic Search using `pgvector`.
- Add caching logic to reuse Quests for similar topics.

## 6. Prompt Engineering Guide (Internal)
The AI should act as a "Quest Master".
Tone: Energetic, witty, and encouraging.
Feedback: Always include a pun or a funny remark for wrong answers to reduce frustration.
